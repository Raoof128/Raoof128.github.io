/*
 * QR-SHIELD Page Transitions
 * Ultra-smooth, fast animations for premium page navigation
 * 
 * Include this file in all HTML pages for consistent transitions
 */

/* ==========================================================================
   PAGE ENTRANCE ANIMATIONS (Faster & Smoother)
   ========================================================================== */

/* Fade-in animation for page load */
@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* Slide-up and fade animation - faster with subtle movement */
@keyframes slideUpFade {
    from {
        opacity: 0;
        transform: translateY(12px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Scale-in animation for modals and cards */
@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.97);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Blur-in effect - faster */
@keyframes blurIn {
    from {
        opacity: 0;
        filter: blur(4px);
    }

    to {
        opacity: 1;
        filter: blur(0);
    }
}

/* ==========================================================================
   PAGE-LEVEL TRANSITIONS (Snappy & Fast)
   ========================================================================== */

/* Apply fast fade-in to the entire page body */
body {
    animation: fadeIn 0.15s ease-out;
}

/* Main content area entrance - snappy */
.main-content {
    animation: slideUpFade 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    animation-delay: 0.05s;
    animation-fill-mode: backwards;
}

/* Sidebar entrance (slide from left) - fast */
@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-10px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.sidebar {
    animation: slideInLeft 0.15s cubic-bezier(0.16, 1, 0.3, 1);
}

/* ==========================================================================
   FONT LOADING FOUC FIX
   Hide Material Symbols icons until font is loaded to prevent
   text fallback (showing class names like "shield", "qr_code", etc.)
   ========================================================================== */

/* Initially hide icon content completely - prevents raw text flash */
.material-symbols-outlined {
    font-size: inherit;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.15s ease, visibility 0.15s ease;
}

/* Show icons once page is fully loaded and fonts are available */
body.fonts-loaded .material-symbols-outlined {
    opacity: 1;
    visibility: visible;
}

/* Fallback: always show after a short delay even if fonts-loaded class not applied */
@keyframes showIcon {
    0% {
        opacity: 0;
        visibility: hidden;
    }

    100% {
        opacity: 1;
        visibility: visible;
    }
}

/* Apply fallback animation with 400ms delay - gives fonts time to load */
.material-symbols-outlined {
    animation: showIcon 0.2s ease 0.4s forwards;
}

/* Override animation once fonts are confirmed loaded */
body.fonts-loaded .material-symbols-outlined {
    animation: none;
}

/* ==========================================================================
   STAGGERED CONTENT ANIMATIONS (Quick stagger)
   ========================================================================== */

/* Cards and sections appear with fast stagger */
.hero-card,
.threat-hero,
.privacy-hero,
.challenge-card,
.verdict-card,
.scoreboard-card,
.settings-card,
.controls-card,
.format-section,
.preview-column {
    animation: slideUpFade 0.25s cubic-bezier(0.16, 1, 0.3, 1);
    animation-fill-mode: backwards;
}

/* Stagger delays - quick succession */
.hero-card {
    animation-delay: 0.08s;
}

.threat-hero {
    animation-delay: 0.08s;
}

.privacy-hero {
    animation-delay: 0.08s;
}

/* Nav links - very fast stagger */
.sidebar-nav .nav-link {
    animation: slideUpFade 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    animation-fill-mode: backwards;
}

.sidebar-nav .nav-link:nth-child(1) {
    animation-delay: 0.02s;
}

.sidebar-nav .nav-link:nth-child(2) {
    animation-delay: 0.04s;
}

.sidebar-nav .nav-link:nth-child(3) {
    animation-delay: 0.06s;
}

.sidebar-nav .nav-link:nth-child(4) {
    animation-delay: 0.08s;
}

.sidebar-nav .nav-link:nth-child(5) {
    animation-delay: 0.10s;
}

.sidebar-nav .nav-link:nth-child(6) {
    animation-delay: 0.12s;
}

.sidebar-nav .nav-link:nth-child(7) {
    animation-delay: 0.14s;
}

.sidebar-nav .nav-link:nth-child(8) {
    animation-delay: 0.16s;
}

.sidebar-nav .nav-link:nth-child(9) {
    animation-delay: 0.18s;
}

.sidebar-nav .nav-link:nth-child(10) {
    animation-delay: 0.20s;
}

/* ==========================================================================
   NAVIGATION LINK TRANSITIONS (Ultra-snappy)
   ========================================================================== */

.nav-link {
    transition:
        background-color 0.12s ease,
        color 0.12s ease,
        transform 0.1s cubic-bezier(0.16, 1, 0.3, 1),
        box-shadow 0.12s ease;
}

.nav-link:hover {
    transform: translateX(3px);
}

.nav-link:active {
    transform: translateX(1px) scale(0.98);
    transition-duration: 0.05s;
}

/* ==========================================================================
   BUTTON TRANSITIONS (Instant feedback)
   ========================================================================== */

button,
.btn-primary,
.btn-secondary,
.btn-danger,
.btn-export,
.btn-scan-new,
.decision-btn {
    transition:
        background-color 0.1s ease,
        transform 0.1s cubic-bezier(0.16, 1, 0.3, 1),
        box-shadow 0.12s ease,
        border-color 0.1s ease;
}

button:hover,
.btn-primary:hover,
.btn-secondary:hover,
.btn-export:hover,
.btn-scan-new:hover {
    transform: translateY(-1px);
}

button:active,
.btn-primary:active,
.btn-secondary:active,
.btn-export:active,
.btn-scan-new:active {
    transform: translateY(0) scale(0.98);
    transition-duration: 0.03s;
}

/* ==========================================================================
   CARD HOVER TRANSITIONS (Responsive & quick)
   ========================================================================== */

.feature-card,
.attack-card,
.list-card,
.meta-card,
.actions-card,
.about-card,
.engine-stats-card,
.risk-meter-card,
.analysis-card,
.hint-card,
.format-card {
    transition:
        transform 0.15s cubic-bezier(0.16, 1, 0.3, 1),
        box-shadow 0.15s ease,
        border-color 0.15s ease;
}

.feature-card:hover,
.attack-card:hover,
.list-card:hover,
.format-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
}

/* ==========================================================================
   PAGE EXIT ANIMATION (Instant feel)
   ========================================================================== */

@keyframes fadeOut {
    from {
        opacity: 1;
    }

    to {
        opacity: 0;
    }
}

@keyframes slideDownFade {
    from {
        opacity: 1;
        transform: translateY(0);
    }

    to {
        opacity: 0;
        transform: translateY(-6px);
    }
}

/* Class to apply when navigating away - very fast */
body.page-exit {
    animation: fadeOut 0.1s ease-in forwards;
    pointer-events: none;
}

/* ==========================================================================
   SKELETON LOADING (for perceived performance)
   ========================================================================== */

@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }

    100% {
        background-position: 200% 0;
    }
}

.skeleton {
    background: linear-gradient(90deg,
            rgba(255, 255, 255, 0.02) 0%,
            rgba(255, 255, 255, 0.08) 50%,
            rgba(255, 255, 255, 0.02) 100%);
    background-size: 200% 100%;
    animation: shimmer 1.2s infinite;
    border-radius: 4px;
}

/* ==========================================================================
   TOAST NOTIFICATION ANIMATIONS (Snappy spring)
   ========================================================================== */

.toast {
    transition:
        transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1),
        opacity 0.15s ease;
}

.toast.hidden {
    opacity: 0;
    transform: translateY(12px) scale(0.95);
    pointer-events: none;
}

.toast:not(.hidden) {
    opacity: 1;
    transform: translateY(0) scale(1);
}

/* ==========================================================================
   MODAL ANIMATIONS (Fast & smooth)
   ========================================================================== */

.modal-overlay {
    transition:
        opacity 0.15s ease,
        backdrop-filter 0.15s ease;
}

.modal-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}

.modal-overlay:not(.hidden) {
    opacity: 1;
}

.modal-content {
    transition:
        transform 0.2s cubic-bezier(0.34, 1.3, 0.64, 1),
        opacity 0.15s ease;
}

.modal-overlay.hidden .modal-content {
    transform: scale(0.95) translateY(12px);
    opacity: 0;
}

.modal-overlay:not(.hidden) .modal-content {
    transform: scale(1) translateY(0);
    opacity: 1;
}

/* ==========================================================================
   DROPDOWN & POPUP ANIMATIONS
   ========================================================================== */

.profile-dropdown,
.notification-dropdown {
    transition:
        opacity 0.12s ease,
        transform 0.15s cubic-bezier(0.16, 1, 0.3, 1);
}

.shared-modal-overlay {
    transition: opacity 0.12s ease;
}

.shared-modal {
    transition: transform 0.15s cubic-bezier(0.16, 1, 0.3, 1);
}

.shared-toast {
    transition:
        transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1),
        opacity 0.12s ease;
}

/* ==========================================================================
   REDUCED MOTION SUPPORT (Accessibility)
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    body,
    .main-content,
    .sidebar,
    .nav-link,
    button,
    .feature-card,
    .toast,
    .modal-content,
    .modal-overlay {
        animation: none !important;
        transition: none !important;
    }
}