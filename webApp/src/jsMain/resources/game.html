<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>QR-SHIELD - Beat the Bot</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Challenge QR-SHIELD's offline AI engine. Can you spot phishing URLs faster than the bot?" />
    <meta name="theme-color" content="#0f1115" media="(prefers-color-scheme: dark)" />
    <meta name="theme-color" content="#f6f6f8" media="(prefers-color-scheme: light)" />

    <!-- PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="assets/logo.svg" />
    <link rel="icon" type="image/svg+xml" href="assets/logo.svg" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />

    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />

    <!-- Theme System -->
    <link href="theme.css" rel="stylesheet" />
    <!-- Game Styles -->
    <link href="game.css?v=3" rel="stylesheet" />
    <!-- Page Transitions -->
    <link href="transitions.css" rel="stylesheet" />
    <!-- Shared UI Components -->
    <link href="shared-ui.css" rel="stylesheet" />
</head>

<body class="game-body">
    <div class="game-layout">

        <!-- ============================================
             SIDEBAR NAVIGATION
             ============================================ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="material-symbols-outlined">shield_lock</span>
                    <span class="logo-text">QR-SHIELD</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section-label">Overview</div>
                <a class="nav-link" href="dashboard.html" id="nav-dashboard">
                    <span class="material-symbols-outlined">dashboard</span>
                    <span>Dashboard</span>
                </a>
                <a class="nav-link" href="scanner.html" id="nav-scanner">
                    <span class="material-symbols-outlined">qr_code_scanner</span>
                    <span>Live Scanner</span>
                </a>
                <a class="nav-link" href="threat.html" id="nav-history">
                    <span class="material-symbols-outlined">history</span>
                    <span>Scan History</span>
                </a>

                <div class="nav-section-label">Security</div>
                <a class="nav-link" href="trust.html" id="nav-allowlist">
                    <span class="material-symbols-outlined">verified_user</span>
                    <span>Allow List</span>
                </a>
                <a class="nav-link" href="onboarding.html" id="nav-settings">
                    <span class="material-symbols-outlined">settings</span>
                    <span>Settings</span>
                </a>

                <div class="nav-section-label">Training</div>
                <a class="nav-link active" href="game.html" id="nav-game">
                    <span class="material-symbols-outlined filled">sports_esports</span>
                    <span>Beat the Bot</span>
                </a>

                <div class="nav-section-label">Reports</div>
                <a class="nav-link" href="export.html" id="nav-export">
                    <span class="material-symbols-outlined">download</span>
                    <span>Export</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">JS</div>
                    <div class="user-info">
                        <span class="user-name">John Smith</span>
                        <span class="user-role">Security Analyst</span>
                    </div>
                    <span class="material-symbols-outlined">expand_more</span>
                </div>
            </div>
        </aside>

        <!-- ============================================
             MAIN CONTENT AREA
             ============================================ -->
        <main class="main-content">

            <!-- Header -->
            <header class="top-header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                        <span class="material-symbols-outlined">menu</span>
                    </button>
                    <nav class="breadcrumbs">
                        <a href="dashboard.html">Dashboard</a>
                        <span class="separator">/</span>
                        <span class="current">Beat the Bot</span>
                    </nav>
                </div>

                <div class="header-right">
                    <button class="theme-toggle" aria-label="Toggle theme" title="Toggle light/dark mode">
                        <span class="material-symbols-outlined icon-light">light_mode</span>
                        <span class="material-symbols-outlined icon-dark">dark_mode</span>
                    </button>
                    <div class="engine-status">
                        <span class="status-dot pulse"></span>
                        <span>Offline Engine V.2.4</span>
                    </div>
                    <button class="notification-btn" aria-label="Notifications">
                        <span class="material-symbols-outlined">notifications</span>
                        <span class="notification-dot"></span>
                    </button>
                </div>
            </header>

            <!-- Content -->
            <div class="content-scroll">
                <div class="content-container">

                    <!-- Page Header -->
                    <div class="page-header">
                        <div class="page-title">
                            <h1>Beat the Bot <span class="material-symbols-outlined">smart_toy</span></h1>
                            <p>Challenge our offline AI engine. Can you spot the phish faster?</p>
                        </div>
                        <div class="session-info">
                            <span class="session-id">Session ID: #GAME-<span id="sessionId">8821</span></span>
                            <button class="btn-secondary" id="endSessionBtn">End Session</button>
                        </div>
                    </div>

                    <!-- Game Grid -->
                    <div class="game-grid">

                        <!-- Left Column: Challenge Area -->
                        <div class="challenge-column">

                            <!-- Round Progress -->
                            <div class="round-progress">
                                <span class="round-label">Round <span id="currentRound">4</span> / <span
                                        id="totalRounds">10</span></span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progressFill" style="width: 40%">
                                        <div class="progress-shimmer"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Challenge Card -->
                            <div class="challenge-card">
                                <div class="challenge-grid-bg"></div>

                                <div class="challenge-content">
                                    <!-- URL Preview -->
                                    <div class="browser-preview" id="browserPreview">
                                        <div class="browser-header">
                                            <div class="browser-dots">
                                                <span class="dot red"></span>
                                                <span class="dot yellow"></span>
                                                <span class="dot green"></span>
                                            </div>
                                            <span class="browser-label">Browser Preview</span>
                                        </div>

                                        <div class="url-bar">
                                            <span class="material-symbols-outlined">lock</span>
                                            <span class="url-text"
                                                id="challengeUrl">https://au-post-tracking.verify-deliveries.net/login</span>
                                        </div>

                                        <div class="message-preview" id="messagePreview">
                                            <span class="material-symbols-outlined">sms</span>
                                            <div class="message-content">
                                                <span class="message-sender">Incoming Message (+61 491 570 010):</span>
                                                <span class="message-text" id="challengeMessage">"AusPost: Your parcel
                                                    failed delivery due to incorrect address details. Please update
                                                    immediately via the link above to avoid return."</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Decision Buttons -->
                                    <div class="decision-area">
                                        <p class="decision-prompt">Make your decision</p>
                                        <div class="decision-buttons">
                                            <button class="decision-btn phishing" id="btnPhishing">
                                                <div class="btn-gradient"></div>
                                                <div class="btn-content">
                                                    <span class="material-symbols-outlined">warning</span>
                                                    <span>Phishing</span>
                                                </div>
                                            </button>
                                            <button class="decision-btn legitimate" id="btnLegitimate">
                                                <div class="btn-gradient"></div>
                                                <div class="btn-content">
                                                    <span class="material-symbols-outlined">check_circle</span>
                                                    <span>Legitimate</span>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Hint Card -->
                            <div class="hint-card">
                                <span class="material-symbols-outlined">lightbulb</span>
                                <div class="hint-content">
                                    <h4>Live Hint</h4>
                                    <p id="hintText">Look closely at the domain structure. Legitimate organisations
                                        rarely use hyphens in the main domain name or generic TLDs like
                                        <code>.net</code> for core services.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column: Scoreboard & Analysis -->
                        <div class="sidebar-column">

                            <!-- Scoreboard -->
                            <div class="scoreboard-card">
                                <div class="scoreboard-header">
                                    <h3>Live Scoreboard</h3>
                                    <span class="vs-badge">VS MODE</span>
                                </div>

                                <div class="scores">
                                    <!-- Player Score -->
                                    <div class="score-row player">
                                        <div class="score-header">
                                            <span class="score-name">You</span>
                                            <span class="score-value" id="playerScore">350 pts</span>
                                        </div>
                                        <div class="score-bar">
                                            <div class="score-fill player" id="playerBar" style="width: 75%"></div>
                                        </div>
                                        <div class="score-stats">
                                            <span>Streak: <span id="playerStreak">3</span> ðŸ”¥</span>
                                            <span>Accuracy: <span id="playerAccuracy">100%</span></span>
                                        </div>
                                    </div>

                                    <!-- Bot Score -->
                                    <div class="score-row bot">
                                        <div class="score-header">
                                            <span class="score-name">
                                                <span class="material-symbols-outlined">smart_toy</span>
                                                QR-Shield Bot
                                            </span>
                                            <span class="score-value" id="botScore">400 pts</span>
                                        </div>
                                        <div class="score-bar">
                                            <div class="score-fill bot" id="botBar" style="width: 85%"></div>
                                        </div>
                                        <div class="score-stats">
                                            <span>Latency: 2ms</span>
                                            <span>Confidence: 99.8%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Round Analysis -->
                            <div class="analysis-card">
                                <h3>Round <span id="analysisRound">3</span> Analysis</h3>

                                <div class="result-badge" id="resultBadge">
                                    <div class="result-icon success">
                                        <span class="material-symbols-outlined">check</span>
                                    </div>
                                    <div class="result-text">
                                        <p class="result-title" id="resultTitle">Correct Decision!</p>
                                        <p class="result-desc" id="resultDesc">You identified the safe URL correctly.
                                        </p>
                                    </div>
                                </div>

                                <div class="bot-reasoning">
                                    <p class="reasoning-title">Why the bot flagged it <span
                                            id="botDecision">Safe</span>:</p>
                                    <ul class="reasoning-list" id="reasoningList">
                                        <li>
                                            <span class="material-symbols-outlined">verified</span>
                                            <span>Certificate Issuer matches domain owner (DigiCert Inc).</span>
                                        </li>
                                        <li>
                                            <span class="material-symbols-outlined">history</span>
                                            <span>Domain age > 5 years (High trust).</span>
                                        </li>
                                        <li>
                                            <span class="material-symbols-outlined">public</span>
                                            <span>Top 1k Alexa Rank whitelisted offline.</span>
                                        </li>
                                    </ul>
                                </div>

                                <div class="educational-note">
                                    <h4>Educational Note</h4>
                                    <p id="educationalNote">"Always expand short links before scanning. The bot does
                                        this automatically by following redirect headers without rendering the page."
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- Result Modal -->
    <div class="modal-overlay hidden" id="resultModal">
        <div class="modal-content">
            <div class="modal-icon" id="modalIcon">
                <span class="material-symbols-outlined">check_circle</span>
            </div>
            <h2 id="modalTitle">Correct!</h2>
            <p id="modalMessage">You spotted the phishing URL correctly.</p>
            <div class="modal-stats">
                <div class="stat">
                    <span class="stat-value" id="modalPoints">+50</span>
                    <span class="stat-label">Points</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="modalTime">1.2s</span>
                    <span class="stat-label">Response</span>
                </div>
            </div>
            <button class="btn-primary" id="nextRoundBtn">Next Round</button>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal-overlay hidden" id="gameOverModal">
        <div class="modal-content game-over">
            <div class="modal-icon trophy">
                <span class="material-symbols-outlined">emoji_events</span>
            </div>
            <h2 id="gameOverTitle">Game Over!</h2>
            <p id="gameOverMessage">Final Results</p>
            <div class="final-scores">
                <div class="final-score player">
                    <span class="label">Your Score</span>
                    <span class="value" id="finalPlayerScore">850</span>
                </div>
                <div class="vs">VS</div>
                <div class="final-score bot">
                    <span class="label">Bot Score</span>
                    <span class="value" id="finalBotScore">920</span>
                </div>
            </div>
            <div class="game-stats">
                <div class="stat">
                    <span class="stat-value" id="finalAccuracy">85%</span>
                    <span class="stat-label">Accuracy</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="finalBestStreak">5</span>
                    <span class="stat-label">Best Streak</span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-primary" id="playAgainBtn">Play Again</button>
                <a href="dashboard.html" class="btn-secondary">Return to Dashboard</a>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast hidden" id="toast">
        <span class="material-symbols-outlined toast-icon">check_circle</span>
        <span class="toast-message" id="toastMessage">Success!</span>
    </div>

    <!-- Kotlin/JS Bundle -->
    <script src="webApp.js"></script>
    <!-- Theme System -->
    <script src="theme.js"></script>
    <!-- Page Transitions -->
    <script src="transitions.js"></script>
    <!-- Shared UI Components -->
    <script src="shared-ui.js"></script>
    <!-- Game Logic -->
    <script src="game.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('[PWA] Service worker registered:', reg.scope))
                    .catch(err => console.warn('[PWA] Service worker failed:', err));
            });
        }
    </script>
</body>

</html>